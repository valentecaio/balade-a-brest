<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Principal</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
		<link rel='stylesheet' type='text/css' href="principal.css">
		
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<script src="http://www.openlayers.org/api/OpenLayers.js"></script>
		<script src='markers.js' style="padding-top: 20px" ></script>		
	</head>
	
	<body>
		<nav class="navbar navbar-inverse">
			<div class="container-fluid">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>                        
					</button>
					<a class="navbar-brand" href="initial.html">WB</a>
				</div>
				<div class="collapse navbar-collapse" id="myNavbar">
					<ul class="nav navbar-nav">
						<li class="active"><a href="#">Balades</a></li>
						<li class="dropdown">
							<a class="dropdown-toggle" data-toggle="dropdown" href="#">Suggestions
							<span class="caret"></span></a>
							<ul class="dropdown-menu">
								<li><a href="#">Parcours</a></li>
								<li><a href="#">Ajouts</a></li>
							</ul>
						</li>
					</ul>
					<ul class="nav navbar-nav navbar-right">
						<li><a href="contact.html"><span class="glyphicon glyphicon-earphone "></span> Contact</a></li>
						<li><a href="login_s4.html"><span class="glyphicon glyphicon-log-in"></span> Login</a></li>
					</ul>
				</div>
			</nav>
			
			<div class="container-fluid">
				<div class="row">
					<div class="col-sm-4">
						<ul class="nav nav-tabs">
							<li class="active"><a data-toggle="tab" href="#point-interet" style="color: black"><b>Points d'interêt</b></a></li>
							<li><a data-toggle="tab" href="#balade" style="color: black"><b>Balades</b></a></li>
						</ul>
						
						<div class="tab-content">
							<div id="point-interet" class="tab-pane fade in active">
								<div class="container-fluid">
									<div class="row list-group" id="points_list"></div>
									<div class="btn-group" style="width:100%">
										<a href="getPixel.html"><button style="width:100%;height: 40px; text-align: left; color: black" class="btn btn-default"><b>Ajouter point d'interêt</b><span class="glyphicon glyphicon-plus pull-right" style="color: black"></span></button></a>
									</div>
								</div>
							</div>
							<div id="balade" class="tab-pane fade">
								<div class="container-fluid">
									<div class="row list-group" id="balades_list"></div>
									<div class="btn-group" style="width:100%">
										<button style="width:100%;height: 40px; text-align: left; color: black" class="btn btn-default"><b>Ajouter balade</b><span class="glyphicon glyphicon-plus pull-right" style="color: black"></span></button>
									</div>
								</div>
							</div>
						</div>
					</div>
					
					<div class="col-sm-8">
						<div style="width:100%; height:550px" id='mapdiv' class="map"></div>
					</div>
				</div>
			</div>
			
			<script type="text/javascript">
				$('.btn').click(function() {
					$(this).toggleClass('active');
				});
			</script>
			
			<script type="text/javascript">
				function setURL(loc) {
					document.getElementById('mapadiv').setAttribute('src', loc);
				}
				function changeMap(loc) {
					// delete previous maps
					div_map = document.getElementsByClassName('map')[0];
					while (div_map.hasChildNodes()) {
						console.log(div_map.lastChild)
						div_map.removeChild(div_map.lastChild);
					}
					
					balade = []
					if (loc == "balade1") {
						balade = [[-4.5250042190, 48.382436270, "1"], [-4.5210042190, 48.386435270, "2"], [-4.5015042190, 48.394435270, "3"], [-4.5116742190, 48.39236270, "4"]]
					} else if (loc == "balade2") {
						balade = [[-4.5240042190, 48.382436270, "1"], [-4.5210042190, 48.382435270, "2"], [-4.5010042190, 48.392435270, "3"], [-4.5116042190, 48.392936270, "4"]]
					} else if (loc == "balade3") {
						balade = [[-4.5250042190, 48.382436270, "1"], [-4.5210042190, 48.382435270, "2"], [-4.5015042190, 48.394435270, "3"], [-4.5116742190, 48.39236270, "4"]]
					} else if (loc == "point1") {
						balade = [[-4.5250042190, 48.382436270, "1"]]
					} else if (loc == "point2") {
						balade = [[-4.5210042190, 48.386435270, "2"]]
					} else if (loc == "point3") {
						balade = [[-4.5015042190, 48.394435270, "3"]]
					} else if (loc == "point4") {
						balade = [[-4.5116742190, 48.39236270, "4"]]
					}
					$(document).ready(addmarkers(balade));
				}
				
				// load map without points
				$(document).ready(addmarkers());
				
				// create example points
				var points = [{latitude: -4.5250042190, longitude: 48.382436270, name: "point1"}, {latitude: -4.5210042190, longitude: 48.386435270, name: "point2"}, {latitude: -4.5015042190, longitude: 48.394435270, name: "point3"}, {latitude: -4.5116742190, longitude: 48.39236270, name: "point4"}, {latitude: -4.5010042190, longitude: 48.392435270, name: "point5"}, {latitude: -4.5210042190, longitude: 48.382435270, name: "point6"}]
				
				// create example strolls
				var balades = [{name: 'balade1', points: [points[0], points[1], points[2], points[3]]}, {name: 'balade2', points: [points[0], points[1], points[5], points[6]]}, {name: 'balade3', points: [points[5], points[6], points[2], points[3]]}]
				
				// add points and strolls to tables
				add_rows("points_list", points);
				add_rows("balades_list", balades);
			</script>
			
		</body>
	</html>
